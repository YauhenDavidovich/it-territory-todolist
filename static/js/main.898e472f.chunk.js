(this["webpackJsonpit-territory-todo"]=this["webpackJsonpit-territory-todo"]||[]).push([[0],{46:function(t,e,n){},47:function(t,e,n){},76:function(t,e,n){"use strict";n.r(e);var c,o,i=n(0),a=n.n(i),s=n(14),r=n.n(s),d=(n(46),n(47),n(3)),l=n(41),u=n(6),j=n(4),b=n(39),f=n.n(b).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"7182e7e1-cf7b-49da-8e89-52ae747000d8"}}),O=function(){return f.get("todo-lists")},h=function(t){return f.post("todo-lists",{title:t})},p=function(t,e){return f.put("todo-lists/".concat(t),{title:e})},m=function(t){return f.get("todo-lists/".concat(t,"/tasks"))},g=function(t,e){return f.delete("todo-lists/".concat(t,"/tasks/").concat(e))},v=function(t,e){return f.post("todo-lists/".concat(t,"/tasks"),{title:e})},x=function(t,e,n){return f.put("todo-lists/".concat(t,"/tasks/").concat(e),n)},I=function(t,e,n){return f.put("todo-lists/".concat(t,"/tasks/").concat(e,"/reorder"),n)};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(c||(c={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(o||(o={}));var k=function(t){return f.post("auth/login",t)},T={isLoggedIn:!1},S=n(1),w=function(){var t=Object(u.c)(),e=Object(u.d)((function(t){return t.auth.isLoggedIn})),n=Object(l.a)({initialValues:{email:"",password:"",rememberMe:!0},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="required fill",t.password||(e.password="password must have"),e},onSubmit:function(e){var n;t((n=e,function(t){k(n).then((function(e){0===e.data.resultCode&&t({type:"login/SET-IS-LOGGED-IN",value:!0})})).catch((function(t){console.log(t)}))}))}});return e?Object(S.jsx)(d.a,{to:"/todolist"}):Object(S.jsx)("div",{className:"main",children:Object(S.jsx)("div",{className:"mainBlock",children:Object(S.jsxs)("form",{onSubmit:n.handleSubmit,children:[Object(S.jsxs)("p",{children:["To log in get registered",Object(S.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",children:"here"})]}),Object(S.jsx)("p",{children:"or use common test account credentials:"}),Object(S.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(S.jsx)("p",{children:"Password: free"}),Object(S.jsx)("label",{htmlFor:"email",children:"Email"}),Object(S.jsx)("input",{id:"email",name:"email",onChange:n.handleChange,value:n.values.email,placeholder:"Email"}),Object(S.jsx)("label",{htmlFor:"password",children:"Password"}),Object(S.jsx)("input",{id:"password",name:"password",type:"password",value:n.values.password,onChange:n.handleChange,placeholder:"Password"}),Object(S.jsx)("button",{type:"submit",children:"Submit"})]})})})},C=n(22),E=[],D=n(9),y=n(13),A={},L=function(t){return function(e){m(t).then((function(n){var c=n.data.items;e(function(t,e){return{type:"SET-TASKS",tasks:t,todolistId:e}}(c,t))}))}},N=function(t,e,n){return function(c,o){var i=o().tasks[n].find((function(e){return e.id===t}));if(i){var a=Object(j.a)({deadline:i.deadline,description:i.description,priority:i.priority,startDate:i.startDate,title:i.title,status:i.status},e);x(n,t,a).then((function(o){if(0===o.data.resultCode){var i=function(t,e,n){return{type:"UPDATE-TASK",model:e,todolistId:n,taskId:t}}(t,e,n);c(i)}})).catch((function(t){console.log(t)}))}else console.warn("task not found in the state")}},P=n(23),K=a.a.memo((function(t){var e=Object(i.useState)(!1),n=Object(D.a)(e,2),c=n[0],o=n[1],a=Object(i.useState)(t.value),s=Object(D.a)(a,2),r=s[0],d=s[1];return c?Object(S.jsx)("input",{value:r,onChange:function(t){d(t.currentTarget.value)},autoFocus:!0,onBlur:function(){o(!1),t.onChange(r)}}):Object(S.jsx)("span",{onDoubleClick:function(){o(!0),d(t.value)},children:t.value})})),F=function(t){var e=Object(u.c)(),n=Object(u.d)((function(t){return t.tasks}))[t.todolistId],o=Object(i.useState)(n),a=Object(D.a)(o,2),s=a[0],r=a[1],d=Object(i.useState)("New task"),l=Object(D.a)(d,2),b=l[0],f=l[1];Object(i.useEffect)((function(){e(L(t.todolistId))}),[e]),Object(i.useEffect)((function(){r(n)}),[n]);var O=function(n){var c,o;e((c=n,o=t.todolistId,function(t){g(o,c).then((function(e){var n=function(t,e){return{type:"REMOVE-TASK",taskId:t,todolistId:e}}(c,o);t(n)}))}))};return Object(S.jsxs)("div",{children:[Object(S.jsx)("input",{type:"text",value:b,onChange:function(n){return c=n.currentTarget.value,f(c),void e(L(t.todolistId));var c}}),Object(S.jsx)("button",{onClick:function(){var n,c;e((n=b,c=t.todolistId,function(t){v(c,n).then((function(e){if(0===e.data.resultCode){var n={type:"ADD-TASK",task:e.data.data.item};t(n)}})).catch((function(t){console.log(t)}))}))},children:"Add task"}),s&&s?Object(S.jsx)(P.a,{onDragEnd:function(n){if(n.destination){var c=Array.from(s),o=c.splice(n.source.index,1),i=Object(D.a)(o,1)[0];c.splice(n.destination.index,0,i),c.map((function(n,c,o){var i,a,s;c||e((i=t.todolistId,a=n.id,s={putAfterItemId:""},function(t){I(i,a,s).then((function(t){})).catch((function(t){console.log(t)}))}))})),r(c)}},children:Object(S.jsx)(P.c,{droppableId:"draggableTasks",children:function(n){return Object(S.jsxs)("ul",Object(j.a)(Object(j.a)({className:"draggableTasks"},n.droppableProps),{},{ref:n.innerRef,children:[s.map((function(n,o){var i=n.id,a=(n.description,n.title),s=n.status;return Object(S.jsx)(P.b,{draggableId:i,index:o,children:function(n){return Object(S.jsxs)("li",Object(j.a)(Object(j.a)(Object(j.a)({ref:n.innerRef},n.draggableProps),n.dragHandleProps),{},{className:"task",children:[Object(S.jsx)("label",{children:Object(S.jsx)("input",{type:"checkbox",checked:s===c.Completed,onChange:function(n){return function(n,o){var i=0;o&&(i=c.Completed),e(N(n,{status:i},t.todolistId))}(i,n.currentTarget.checked)}})}),Object(S.jsx)("div",{className:s===c.Completed?"is-done":"new",children:Object(S.jsx)(K,{value:a,onChange:function(n){return function(n,c){e(N(n,{title:c},t.todolistId))}(i,n)}})}),Object(S.jsx)("button",{onClick:function(){return O(i)},children:"Delete"})]}))}},i)})),n.placeholder]}))}})}):null]})},M=function(){var t=Object(u.c)(),e=Object(u.d)((function(t){return t.todolists}));if(Object(i.useEffect)((function(){t((function(t){O().then((function(e){t({type:"SET-TODOLISTS",todolists:e.data})}))}))}),[e]),!Object(u.d)((function(t){return t.auth.isLoggedIn})))return Object(S.jsx)(d.a,{to:"/login"});var n=function(e,n){t(function(t,e){return function(n){p(t,e).then((function(c){n(function(t,e){return{type:"CHANGE-TODOLIST-TITLE",id:t,title:e}}(t,e))}))}}(e,n))};return Object(S.jsx)("div",{children:e&&e?Object(S.jsx)("div",{className:"main",children:Object(S.jsxs)("div",{className:"mainBlock",children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("h2",{children:Object(S.jsx)(K,{value:e[0].title,onChange:function(t){return n(e[0].id,t)}})}),Object(S.jsx)("p",{children:"double click to change name"})]}),Object(S.jsx)(F,{todolistId:e[0].id})]})}):Object(S.jsx)("button",{onClick:function(){var e;t((e="new todo2",function(t){h(e).then((function(e){t({type:"ADD-TODOLIST",todolist:e.data.data.item})}))}))},children:"Add todo"})})};var R=function(){return Object(S.jsxs)(d.d,{children:[Object(S.jsx)(d.b,{path:"/login",element:Object(S.jsx)(w,{})}),Object(S.jsx)(d.b,{path:"/todolist",element:Object(S.jsx)(M,{})}),Object(S.jsx)(d.b,{path:"*",element:Object(S.jsx)(d.a,{to:"/login"})})]})},B=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(e){var n=e.getCLS,c=e.getFID,o=e.getFCP,i=e.getLCP,a=e.getTTFB;n(t),c(t),o(t),i(t),a(t)}))},G=n(16),U=n(10),H=n(40),V=Object(U.c)({auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"login/SET-IS-LOGGED-IN":return Object(j.a)(Object(j.a)({},t),{},{isLoggedIn:e.value});default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!=e.id}));case"ADD-TODOLIST":return[Object(j.a)(Object(j.a)({},e.todolist),{},{filter:"all"})].concat(Object(C.a)(t));case"SET-TODOLISTS":return e.todolists.map((function(t){return Object(j.a)(Object(j.a)({},t),{},{filter:"all",entityStatus:"idle"})}));default:return t}},tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TASK":return Object(j.a)(Object(j.a)({},t),{},Object(y.a)({},e.todolistId,t[e.todolistId].filter((function(t){return t.id!=e.taskId}))));case"ADD-TASK":return Object(j.a)(Object(j.a)({},t),{},Object(y.a)({},e.task.todoListId,[e.task].concat(Object(C.a)(t[e.task.todoListId]))));case"UPDATE-TASK":return Object(j.a)(Object(j.a)({},t),{},Object(y.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(j.a)(Object(j.a)({},t),e.model):t}))));case"SET-TASKS":return Object(j.a)(Object(j.a)({},t),{},Object(y.a)({},e.todolistId,e.tasks))}return t}}),Z=Object(U.e)(V,Object(U.a)(H.a));window.store=Z,r.a.render(Object(S.jsx)(a.a.StrictMode,{children:Object(S.jsx)(G.a,{children:Object(S.jsx)(u.a,{store:Z,children:Object(S.jsx)(R,{})})})}),document.getElementById("root")),B()}},[[76,1,2]]]);
//# sourceMappingURL=main.898e472f.chunk.js.map